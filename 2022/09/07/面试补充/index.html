

<!DOCTYPE html>
<html lang="zh-CN" data-default-color-scheme=auto>



<head>
  <meta charset="UTF-8">
  <link rel="apple-touch-icon" sizes="76x76" href="/img/favicon.png">
  <link rel="icon" href="/img/favicon.png">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, shrink-to-fit=no">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  
  <meta name="theme-color" content="#2f4154">
  <meta name="author" content="Mr.Wang">
  <meta name="keywords" content="">
  
    <meta name="description" content="JAVA语言为什么把String类型设计成不可变？第一：在Java程序中String类型是使用最多的，这就牵扯到大量的增删改查，每次增删改差之前其实jvm需要检查一下这个String对象的安全性，就是通过hashcode，当设计成不可变对象时候，就保证了每次增删改查的hashcode的唯一性，也就可以放心的操作。 第二：网络连接地址URL,文件路径path通常情况下都是以String类型保存, 假">
<meta property="og:type" content="article">
<meta property="og:title" content="面试补充">
<meta property="og:url" content="https://eliseo.top/2022/09/07/%E9%9D%A2%E8%AF%95%E8%A1%A5%E5%85%85/index.html">
<meta property="og:site_name" content="Eliseo的小屋">
<meta property="og:description" content="JAVA语言为什么把String类型设计成不可变？第一：在Java程序中String类型是使用最多的，这就牵扯到大量的增删改查，每次增删改差之前其实jvm需要检查一下这个String对象的安全性，就是通过hashcode，当设计成不可变对象时候，就保证了每次增删改查的hashcode的唯一性，也就可以放心的操作。 第二：网络连接地址URL,文件路径path通常情况下都是以String类型保存, 假">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://eliseo.top/2022/09/07/%E9%9D%A2%E8%AF%95%E8%A1%A5%E5%85%85/%E5%BE%AA%E7%8E%AF%E4%BE%9D%E8%B5%96.png">
<meta property="og:image" content="https://eliseo.top/2022/09/07/%E9%9D%A2%E8%AF%95%E8%A1%A5%E5%85%85/image-20220919101248662.png">
<meta property="og:image" content="https://eliseo.top/2022/09/07/%E9%9D%A2%E8%AF%95%E8%A1%A5%E5%85%85/image-20220919101344155.png">
<meta property="og:image" content="https://eliseo.top/2022/09/07/%E9%9D%A2%E8%AF%95%E8%A1%A5%E5%85%85/image-20220920085449019.png">
<meta property="og:image" content="https://eliseo.top/2022/09/07/%E9%9D%A2%E8%AF%95%E8%A1%A5%E5%85%85/image-20220920111625473.png">
<meta property="og:image" content="https://uploadfiles.nowcoder.com/images/20220224/4107856_1645688931497/B7A9F3ADBA028FE6FDE22C94D566B4F1">
<meta property="og:image" content="https://uploadfiles.nowcoder.com/images/20220224/4107856_1645688954741/FB03BC4205AD26DC0210B12412AAC145">
<meta property="og:image" content="https://uploadfiles.nowcoder.com/images/20220224/4107856_1645688973970/C2928A93915A4AEF2709862EBAC8515C">
<meta property="og:image" content="https://eliseo.top/2022/09/07/%E9%9D%A2%E8%AF%95%E8%A1%A5%E5%85%85/image-20221005092455114.png">
<meta property="og:image" content="https://eliseo.top/2022/09/07/%E9%9D%A2%E8%AF%95%E8%A1%A5%E5%85%85/image-20221013220338553.png">
<meta property="og:image" content="https://eliseo.top/2022/09/07/%E9%9D%A2%E8%AF%95%E8%A1%A5%E5%85%85/image-20221013221352919.png">
<meta property="og:image" content="https://eliseo.top/2022/09/07/%E9%9D%A2%E8%AF%95%E8%A1%A5%E5%85%85/image-20221013221552125.png">
<meta property="og:image" content="https://eliseo.top/2022/09/07/%E9%9D%A2%E8%AF%95%E8%A1%A5%E5%85%85/image-20221013221726735.png">
<meta property="og:image" content="https://eliseo.top/2022/09/07/%E9%9D%A2%E8%AF%95%E8%A1%A5%E5%85%85/image-20221023225904885.png">
<meta property="article:published_time" content="2022-09-07T02:33:00.000Z">
<meta property="article:modified_time" content="2022-11-14T00:38:45.012Z">
<meta property="article:author" content="Mr.Wang">
<meta property="article:tag" content="面试">
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:image" content="https://eliseo.top/2022/09/07/%E9%9D%A2%E8%AF%95%E8%A1%A5%E5%85%85/%E5%BE%AA%E7%8E%AF%E4%BE%9D%E8%B5%96.png">
  
  
    <meta name="referrer" content="no-referrer-when-downgrade">
  
  
  <title>面试补充 - Eliseo的小屋</title>

  <link  rel="stylesheet" href="https://lib.baomitu.com/twitter-bootstrap/4.6.1/css/bootstrap.min.css" />



  <link  rel="stylesheet" href="https://lib.baomitu.com/github-markdown-css/4.0.0/github-markdown.min.css" />

  <link  rel="stylesheet" href="https://lib.baomitu.com/hint.css/2.7.0/hint.min.css" />

  <link  rel="stylesheet" href="https://lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.css" />



<!-- 主题依赖的图标库，不要自行修改 -->
<!-- Do not modify the link that theme dependent icons -->

<link rel="stylesheet" href="//at.alicdn.com/t/font_1749284_hj8rtnfg7um.css">



<link rel="stylesheet" href="//at.alicdn.com/t/font_1736178_lbnruvf0jn.css">


<link  rel="stylesheet" href="/css/main.css" />


  <link id="highlight-css" rel="stylesheet" href="/css/highlight.css" />
  
    <link id="highlight-css-dark" rel="stylesheet" href="/css/highlight-dark.css" />
  




  <script id="fluid-configs">
    var Fluid = window.Fluid || {};
    Fluid.ctx = Object.assign({}, Fluid.ctx)
    var CONFIG = {"hostname":"eliseo.top","root":"/","version":"1.9.0","typing":{"enable":true,"typeSpeed":70,"cursorChar":"_","loop":false,"scope":[]},"anchorjs":{"enable":"left","element":"h1,h2,h3,h4,h5,h6","placement":"right","visible":"hover","icon":""},"progressbar":{"enable":true,"height_px":3,"color":"#29d","options":{"showSpinner":false,"trickleSpeed":100}},"code_language":{"enable":true,"default":"TEXT"},"copy_btn":true,"image_caption":{"enable":true},"image_zoom":{"enable":true,"img_url_replace":["",""]},"toc":{"enable":true,"placement":"right","headingSelector":"h1,h2,h3,h4,h5,h6","collapseDepth":0},"lazyload":{"enable":true,"loading_img":"/img/loading.gif","onlypost":false,"offset_factor":2},"web_analytics":{"enable":false,"follow_dnt":true,"baidu":null,"google":null,"gtag":null,"tencent":{"sid":null,"cid":null},"woyaola":null,"cnzz":null,"leancloud":{"app_id":null,"app_key":null,"server_url":null,"path":"window.location.pathname","ignore_local":false}},"search_path":"/local-search.xml"};

    if (CONFIG.web_analytics.follow_dnt) {
      var dntVal = navigator.doNotTrack || window.doNotTrack || navigator.msDoNotTrack;
      Fluid.ctx.dnt = dntVal && (dntVal.startsWith('1') || dntVal.startsWith('yes') || dntVal.startsWith('on'));
    }
  </script>
  <script  src="/js/utils.js" ></script>
  <script  src="/js/color-schema.js" ></script>

  
<meta name="generator" content="Hexo 6.2.0"><link rel="alternate" href="/atom.xml" title="Eliseo的小屋" type="application/atom+xml">
</head>


<body>
  

  <header>
    

<div class="header-inner" style="height: 70vh;">
  <nav id="navbar" class="navbar fixed-top  navbar-expand-lg navbar-dark scrolling-navbar">
  <div class="container">
    <a class="navbar-brand" href="/">
      <strong>Eliseo</strong>
    </a>

    <button id="navbar-toggler-btn" class="navbar-toggler" type="button" data-toggle="collapse"
            data-target="#navbarSupportedContent"
            aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
      <div class="animated-icon"><span></span><span></span><span></span></div>
    </button>

    <!-- Collapsible content -->
    <div class="collapse navbar-collapse" id="navbarSupportedContent">
      <ul class="navbar-nav ml-auto text-center">
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/">
                <i class="iconfont icon-home-fill"></i>
                主页
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/archives/">
                <i class="iconfont icon-archive-fill"></i>
                归档
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/categories/">
                <i class="iconfont icon-category-fill"></i>
                分类
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/tags/">
                <i class="iconfont icon-tags-fill"></i>
                标签
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/about/">
                <i class="iconfont icon-user-fill"></i>
                关于
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/links/">
                <i class="iconfont icon-link-fill"></i>
                友情链接
              </a>
            </li>
          
        
        
          <li class="nav-item" id="search-btn">
            <a class="nav-link" target="_self" href="javascript:;" data-toggle="modal" data-target="#modalSearch" aria-label="Search">
              &nbsp;<i class="iconfont icon-search"></i>&nbsp;
            </a>
          </li>
          
        
        
          <li class="nav-item" id="color-toggle-btn">
            <a class="nav-link" target="_self" href="javascript:;" aria-label="Color Toggle">&nbsp;<i
                class="iconfont icon-dark" id="color-toggle-icon"></i>&nbsp;</a>
          </li>
        
      </ul>
    </div>
  </div>
</nav>

  

<div id="banner" class="banner" parallax=true
     style="background: url('/img/default.png') no-repeat center center; background-size: cover;">
  <div class="full-bg-img">
    <div class="mask flex-center" style="background-color: rgba(0, 0, 0, 0.3)">
      <div class="banner-text text-center fade-in-up">
        <div class="h2">
          
            <span id="subtitle" data-typed-text="面试补充"></span>
          
        </div>

        
          
  <div class="mt-3">
    
      <span class="post-meta mr-2">
        <i class="iconfont icon-author" aria-hidden="true"></i>
        Mr.Wang
      </span>
    
    
      <span class="post-meta">
        <i class="iconfont icon-date-fill" aria-hidden="true"></i>
        <time datetime="2022-09-07 10:33" pubdate>
          2022年9月7日 上午
        </time>
      </span>
    
  </div>

  <div class="mt-1">
    
      <span class="post-meta mr-2">
        <i class="iconfont icon-chart"></i>
        
          <!-- compatible with older versions-->
          10k 字
        
      </span>
    

    
      <span class="post-meta mr-2">
        <i class="iconfont icon-clock-fill"></i>
        
        
        
          <!-- compatible with older versions-->
          85 分钟
        
      </span>
    

    
    
      
        <span id="busuanzi_container_page_pv" style="display: none">
          <i class="iconfont icon-eye" aria-hidden="true"></i>
          <span id="busuanzi_value_page_pv"></span> 次
        </span>
        
      
    
  </div>


        
      </div>

      
    </div>
  </div>
</div>

</div>

  </header>

  <main>
    
      

<div class="container-fluid nopadding-x">
  <div class="row nomargin-x">
    <div class="side-col d-none d-lg-block col-lg-2">
      

    </div>

    <div class="col-lg-8 nopadding-x-md">
      <div class="container nopadding-x-md" id="board-ctn">
        <div id="board">
          <article class="post-content mx-auto">
            <!-- SEO header -->
            <h1 style="display: none">面试补充</h1>
            
              <p class="note note-info">
                
                  
                    <!-- compatible with older versions-->
                    本文最后更新于：4 分钟前
                  
                
              </p>
            
            <div class="markdown-body">
              
              <h1 id="JAVA语言为什么把String类型设计成不可变？"><a href="#JAVA语言为什么把String类型设计成不可变？" class="headerlink" title="JAVA语言为什么把String类型设计成不可变？"></a>JAVA语言为什么把String类型设计成不可变？</h1><p>第一：在Java程序中String类型是使用最多的，这就牵扯到大量的增删改查，每次增删改差之前其实jvm需要检查一下这个String对象的安全性，就是通过hashcode，当设计成不可变对象时候，就保证了每次增删改查的hashcode的唯一性，也就可以放心的操作。</p>
<p>第二：网络连接地址URL,文件路径path通常情况下都是以String类型保存, 假若String不是固定不变的,将会引起各种安全隐患。就好比我们的密码不能以String的类型保存，，如果你将密码以明文的形式保存成字符串，那么它将一直留在内存中，直到垃圾收集器把它清除。而由于字符串被放在字符串缓冲池中以方便重复使用，所以它就可能在内存中被保留很长时间，而这将导致安全隐患</p>
<p>第三：字符串值是被保留在常量池中的，也就是说假若字符串对象允许改变,那么将会导致各种逻辑错误</p>
<h1 id="缓存和数据库一致性问题"><a href="#缓存和数据库一致性问题" class="headerlink" title="缓存和数据库一致性问题"></a>缓存和数据库一致性问题</h1><p><a target="_blank" rel="noopener" href="https://mp.weixin.qq.com/s?__biz=MzIyOTYxNDI5OA==&mid=2247487312&idx=1&sn=fa19566f5729d6598155b5c676eee62d&chksm=e8beb8e5dfc931f3e35655da9da0b61c79f2843101c130cf38996446975014f958a6481aacf1&scene=178&cur_album_id=1699766580538032128#rd">缓存和数据库一致性问题，看这篇就够了 </a></p>
<p>最刚开始：</p>
<p>​    1、更新缓存之后更新数据库</p>
<p>​    2、更新数据库之后更新缓存</p>
<p>发现以上两者不论何时都会有问题，所以引入了删除缓存的操作。</p>
<p>更新成为：</p>
<p>​    1、删除缓存之后更新数据库</p>
<p>​    2、更新数据库之后删除缓存</p>
<p>一般来说，第二种情况的并发问题不可能出现。因为写数据库的数据的时候一般都会进行加锁，所以写数据会比读数据的时候要慢，</p>
<p>如果要使用第一种删除缓存之后更新数据库，然后还要保证一致性，那么就使用<strong>延迟双删</strong>；先删除缓存之后更新数据库，过1s以后再次删除缓存。这样就可以把脏数据删除。</p>
<hr>
<p>如果删除缓存失败了那么应该怎么办？ <strong>重试，</strong>无论是先操作缓存还是先操作数据库，但凡后者执行失败了，那么我们就可以发起重试。</p>
<p>那么如何重试呢？ <strong>异步重试</strong></p>
<p>​    1、重试请求写到消息队列中，然后由专门的消费者来重试，直到成功</p>
<blockquote>
<p>流程如下所示<br>（1）更新数据库数据；<br>（2）缓存因为种种问题删除失败<br>（3）将需要删除的key发送至消息队列<br>（4）自己消费消息，获得需要删除的key<br>（5）继续重试删除操作，直到成功</p>
</blockquote>
<p>​    2、订阅数据库变更日志，在操作缓存</p>
<blockquote>
<p>流程如下</p>
<p> 所示：<br>（1）更新数据库数据<br>（2）数据库会将操作信息写入binlog日志当中<br>（3）订阅程序提取出所需要的数据以及key<br>（4）另起一段非业务代码，获得该信息<br>（5）尝试删除缓存操作，发现删除失败<br>（6）将这些信息发送至消息队列<br>（7）重新从消息队列中获得该数据，重试操作。</p>
</blockquote>
<h1 id="Spring的循环依赖如何解决？"><a href="#Spring的循环依赖如何解决？" class="headerlink" title="Spring的循环依赖如何解决？"></a>Spring的循环依赖如何解决？</h1><p><strong>因为加入singletonFactories三级缓存的前提是执行了构造器来创建半成品的对象，所以构造器的循环依赖没法解决</strong></p>
<p>set注入导致的循环依赖可以解决(使用三级缓存)，<strong>但是如果是由构造器导致的循环依赖没有解决的方法。</strong></p>
<p>Spring通过三级缓存解决了循环依赖，其中一级缓存为单例池（<code>singletonObjects</code>）,二级缓存为早期曝光对象<code>earlySingletonObjects</code>，三级缓存为早期曝光对象工厂（<code>singletonFactories</code>）。当A、B两个类发生循环引用时，在A完成实例化后，就使用实例化后的对象去创建一个对象工厂，并添加到三级缓存中，如果A被AOP代理，那么通过这个工厂获取到的就是A代理后的对象，如果A没有被AOP代理，那么这个工厂获取到的就是A实例化的对象。当A进行属性注入时，会去创建B，同时B又依赖了A，所以创建B的同时又会去调用getBean(a)来获取需要的依赖，此时的getBean(a)会从缓存中获取，第一步，先获取到三级缓存中的工厂；第二步，调用对象工工厂的getObject方法来获取到对应的对象，得到这个对象后将其注入到B中。紧接着B会走完它的生命周期流程，包括初始化、后置处理器等。当B创建完后，会将B再注入到A中，此时A再完成它的整个生命周期。至此，循环依赖结束！</p>
<p>A首先完成了初始化的第一步，并且将自己提前曝光到singletonFactories中，此时进行初始化的第二步，发现自己依赖对象B，此时就尝试去get(B)，发现B还没有被create，所以走create流程，B在初始化第一步的时候发现自己依赖了对象A，于是尝试get(A)，尝试一级缓存singletonObjects(肯定没有，因为A还没初始化完全)，尝试二级缓存earlySingletonObjects（也没有），尝试三级缓存singletonFactories，由于A通过ObjectFactory将自己提前曝光了，所以B能够通过ObjectFactory.getObject拿到A对象(虽然A还没有初始化完全，但是总比没有好呀)，B拿到A对象后顺利完成了初始化阶段1、2、3，完全初始化之后将自己放入到一级缓存singletonObjects中。此时返回A中，A此时能拿到B的对象顺利完成自己的初始化阶段2、3，最终A也完成了初始化，进去了一级缓存singletonObjects中，而且更加幸运的是，由于B拿到了A的对象引用，所以B现在hold住的A对象完成了初始化。（简单来说,就是spring创造了一个 循环依赖的结束点标识）</p>
<p><img src="/2022/09/07/%E9%9D%A2%E8%AF%95%E8%A1%A5%E5%85%85/%E5%BE%AA%E7%8E%AF%E4%BE%9D%E8%B5%96.png" srcset="/img/loading.gif" lazyload alt="循环依赖"></p>
<h1 id="为什么要使用三级缓存呢？二级缓存能解决循环依赖吗？"><a href="#为什么要使用三级缓存呢？二级缓存能解决循环依赖吗？" class="headerlink" title="为什么要使用三级缓存呢？二级缓存能解决循环依赖吗？"></a>为什么要使用三级缓存呢？二级缓存能解决循环依赖吗？</h1><p>如果要使用二级缓存解决循环依赖，意味着所有Bean在实例化后就要完成AOP代理，这样违背了Spring设计的原则，Spring在设计之初就是通过<code>AnnotationAwareAspectJAutoProxyCreator</code>这个后置处理器来在Bean生命周期的最后一步来完成AOP代理，而不是在实例化后就立马进行AOP代理。……</p>
<h1 id="Minor-GC触发条件"><a href="#Minor-GC触发条件" class="headerlink" title="Minor GC触发条件"></a>Minor GC触发条件</h1><p>当Eden区满时，触发Minor GC。</p>
<h1 id="Full-GC的触发条件"><a href="#Full-GC的触发条件" class="headerlink" title="Full GC的触发条件"></a>Full GC的触发条件</h1><p>（1）System.gc()方法的调用</p>
<blockquote>
<p>此方法的调用是建议JVM进行Full GC,虽然只是建议而非一定,但很多情况下它会触发 Full GC,从而增加Full GC的频率,也即增加了间歇性停顿的次数。强烈影响性能，建议能不使用此方法就别使用，让虚拟机自己去管理它的内存，可通过通过-XX:+ DisableExplicitGC来禁止RMI（Java远程方法调用）调用System.gc。</p>
</blockquote>
<p>（2）老年代空间不足</p>
<blockquote>
<p>旧生代空间只有在新生代对象转入及创建为大对象、大数组时才会出现不足的现象，当执行Full GC后空间仍然不足，则抛出如下错误： java.lang.OutOfMemoryError: Java heap space  为避免以上两种状况引起的FullGC，调优时应尽量做到让对象在Minor GC阶段被回收、让对象在新生代多存活一段时间及不要创建过大的对象及数组。</p>
</blockquote>
<p>（3）永久代(方法区)空间不足</p>
<blockquote>
<p>JVM规范中运行时数据区域中的方法区，在HotSpot虚拟机中又被习惯称为永生代或者永生区，Permanet Generation中存放的为一些class的信息、常量、静态变量等数据，当系统中要加载的类、反射的类和调用的方法较多时，Permanet Generation可能会被占满，在未配置为采用CMS GC的情况下也会执行Full GC。如果经过Full GC仍然回收不了，那么JVM会抛出如下错误信息：<br> java.lang.OutOfMemoryError: PermGen space<br> 为避免Perm Gen占满造成Full GC现象，可采用的方法为增大Perm Gen空间或转为使用CMS GC。</p>
</blockquote>
<p>（4）通过Minor GC后进入老年代的平均大小大于老年代的可用内存</p>
<blockquote>
<p>如果发现统计数据说之前Minor GC的平均晋升大小比目前old gen剩余的空间大，则不会触发Minor GC而是转为触发full GC</p>
</blockquote>
<p>（5）由Eden区、From Space区向To Space区复制时，对象大小大于To Space可用内存，则把该对象转存到老年代，且老年代的可用内存小于该对象大小</p>
<h1 id="volatile详解"><a href="#volatile详解" class="headerlink" title="volatile详解"></a>volatile详解</h1><p><strong>作用：</strong></p>
<blockquote>
<p>1、防止指令重排</p>
<p>​        通过插入内存屏障的方式来防止指令重排，因为在创建对象的时候一般有三步，(1) 分配内存空间 (2) 初始化对象 (3) 将对象指向分配的内存地址 ，但是如果不防止指令重排就会出现 1 -&gt; 3 -&gt;2 这种情况，就会将一个没有初始化的对象暴露出来。</p>
<p>2、保证可见性(禁用CPU缓存)</p>
<p>​        由于每一个线程都拥有自己的一个告诉缓存区(线程的工作内存)，但是当你添加了volatile这个关键字的时候就会让所有线程读取这个参数的时候从主存中读取，保证元素的可见性。</p>
</blockquote>
<p>不使用<strong>volatile</strong>的多线程</p>
<p><img src="/2022/09/07/%E9%9D%A2%E8%AF%95%E8%A1%A5%E5%85%85/image-20220919101248662.png" srcset="/img/loading.gif" lazyload></p>
<p>使用<strong>volatile</strong>的多线程</p>
<p><img src="/2022/09/07/%E9%9D%A2%E8%AF%95%E8%A1%A5%E5%85%85/image-20220919101344155.png" srcset="/img/loading.gif" lazyload></p>
<h1 id="HashMap"><a href="#HashMap" class="headerlink" title="HashMap"></a>HashMap</h1><p><a target="_blank" rel="noopener" href="https://zhuanlan.zhihu.com/p/127147909">HashMap原理详解</a></p>
<blockquote>
<p>如何获得key数组的下标？</p>
</blockquote>
<p>put的时候只对key进行hash运算</p>
<ol>
<li>获取到key的hashcode (32为的int值)</li>
<li>通过扰动函数（哈希函数）得到 newhash</li>
<li>下标 index = newhash &amp; ( table.length - 1) (逻辑与运算)</li>
</ol>
<blockquote>
<p><strong>newhash如何获得？</strong></p>
<p>​    通过传入的key的hashcode值的高16位与低16位进行异或(相同为0)运算</p>
</blockquote>
<p>hashmap的put操作是<strong>尾插法</strong></p>
<p><img src="/2022/09/07/%E9%9D%A2%E8%AF%95%E8%A1%A5%E5%85%85/image-20220920085449019.png" srcset="/img/loading.gif" lazyload alt="put方法"></p>
<blockquote>
<p>hashmap 的put详解：</p>
</blockquote>
<p>1、先判断当前table是否为空，如果是空那么就进行初始化，让容器大小变成16。</p>
<p>2、根据key通过哈希算法与 与运算得到数组下标。</p>
<p>3、判断table[i]是否为空，如果是空那么就直接插入(1.7头插 1.8尾插)。</p>
<p>4、如果table[i]不是空，那么判断当前位置的node是什么node</p>
<p>​    a.如果是红黑树node则直接调用红黑树的方法插入键值对；</p>
<p>​    b.如果是链表node，那么先遍历链表node，判断一下链表node的key是不是与当前的key相等，是就替换旧值；如果链表中的key与当前key不相等，就直接插入链表(尾插法)，如果发现插入之后链表长度大于8，就转换为红黑树。</p>
<p>5、插入成功之后，令size++，如果元素个数(size)到达了(size = 容量 * 阈值)，就进行扩容。</p>
<p>6、扩容成功之后对元素的下标进行重新计算。</p>
<blockquote>
<p>hashmap的resize详解：</p>
</blockquote>
<p><img src="/2022/09/07/%E9%9D%A2%E8%AF%95%E8%A1%A5%E5%85%85/image-20220920111625473.png" srcset="/img/loading.gif" lazyload></p>
<ol>
<li>数组的初始容量为16，而容量是以2的次方扩充的，一是为了提高性能使用足够大的数组，二是为了能使用位运算代替取模预算(据说提升了5~8倍)。</li>
<li>数组是否需要扩充是通过负载因子判断的，如果当前元素个数为数组容量的0.75时，就会扩充数组。这个0.75就是默认的负载因子，可由构造器传入。我们也可以设置大于1的负载因子，这样数组就不会扩充，牺牲性能，节省内存。</li>
<li>为了解决碰撞，数组中的元素是单向链表类型。当链表长度到达一个阈值时（7或8），会将链表转换成红黑树提高性能。而当链表长度缩小到另一个阈值时（6），又会将红黑树转换回单向链表提高性能。</li>
<li>对于第三点补充说明，检查链表长度转换成红黑树之前，还会先检测当前数组数组是否到达一个阈值（64），如果没有到达这个容量，会放弃转换，先去扩充数组。所以上面也说了链表长度的阈值是7或8，因为会有一次放弃转换的操作。</li>
</ol>
<p><strong>扩展阅读</strong></p>
<p>例如我们从16扩展为32时，具体的变化如下所示：</p>
<p><img src="https://uploadfiles.nowcoder.com/images/20220224/4107856_1645688931497/B7A9F3ADBA028FE6FDE22C94D566B4F1" srcset="/img/loading.gif" lazyload></p>
<p>因此元素在重新计算hash之后，因为n变为2倍，那么n-1的mask范围在高位多1bit(红色)，因此新的index就会发生这样的变化：</p>
<p><img src="https://uploadfiles.nowcoder.com/images/20220224/4107856_1645688954741/FB03BC4205AD26DC0210B12412AAC145" srcset="/img/loading.gif" lazyload></p>
<p>因此，我们在扩充HashMap的时候，不需要重新计算hash，只需要看看原来的hash值新增的那个bit是1还是0就好了，是0的话索引没变，是1的话索引变成“原索引+oldCap”。可以看看下图为16扩充为32的resize示意图：</p>
<p><img src="https://uploadfiles.nowcoder.com/images/20220224/4107856_1645688973970/C2928A93915A4AEF2709862EBAC8515C" srcset="/img/loading.gif" lazyload></p>
<p>这个设计确实非常的巧妙，既省去了重新计算hash值的时间，而且同时，由于新增的1bit是0还是1可以认为是随机的，因此resize的过程，均匀的把之前的冲突的节点分散到新的bucket了。</p>
<h1 id="gateway网关的组成以及断言的作用"><a href="#gateway网关的组成以及断言的作用" class="headerlink" title="gateway网关的组成以及断言的作用"></a>gateway网关的组成以及断言的作用</h1><p>不仅可以完成一些路由的转发，也可以提供一些安全审核，流量控制、过滤器的功能</p>
<p><strong>组成：</strong>路由、断言以及过滤器</p>
<p>（1）路由。路由是网关最基础的部分，路由信息有一个ID、一个目的URL、一组断言和一组Filter组成。如果断言路由为真，则说明请求的URL和配置匹配</p>
<p>（2）断言。Java8中的断言函数。Spring Cloud Gateway中的断言函数输入类型是Spring5.0框架中的ServerWebExchange。Spring Cloud Gateway中的断言函数允许开发者去定义匹配来自于http request中的任何信息，比如请求头和参数等。</p>
<p>（3）过滤器。一个标准的Spring webFilter。Spring cloud gateway中的filter分为两种类型的Filter，分别是Gateway Filter和Global Filter。过滤器Filter将会对请求和响应进行修改处理</p>
<h1 id="什么是单点登录以及单点登录的实现方式"><a href="#什么是单点登录以及单点登录的实现方式" class="headerlink" title="什么是单点登录以及单点登录的实现方式"></a>什么是单点登录以及单点登录的实现方式</h1><p>单点登录(SingleSignOn，SSO)，就是通过单点登录(SingleSignOn，SSO)，就是通过用户的一次性鉴别登录。<strong>在多个应用系统中，只需要登录一次，就可以访问其他相互信任的应用系统。</strong></p>
<p><img src="/2022/09/07/%E9%9D%A2%E8%AF%95%E8%A1%A5%E5%85%85/image-20221005092455114.png" srcset="/img/loading.gif" lazyload alt="单点登录的三种实现方式"></p>
<h1 id="为什么使用B-树作为索引？"><a href="#为什么使用B-树作为索引？" class="headerlink" title="为什么使用B+树作为索引？"></a>为什么使用B+树作为索引？</h1><ol>
<li>B+树能显著减少IO次数，提高效率</li>
<li>B+树的查询效率更加稳定，因为数据放在叶子节点</li>
<li>B+树能提高范围查询的效率，因为叶子节点指向下一个叶子节点</li>
</ol>
<h1 id="cookie和session的区别"><a href="#cookie和session的区别" class="headerlink" title="cookie和session的区别"></a>cookie和session的区别</h1><p>1、存储位置：cookie数据存放在客户的浏览器上，session数据放在服务器上。</p>
<p>2、安全性：cookie不是很安全，别人可以分析存放在本地的COOKIE并进行COOKIE欺骗考虑到安全应当使用session。</p>
<p>3、性能：session会在一定时间内保存在服务器上。当访问增多，会比较占用你服务器的性能考虑到减轻服务器性能方面，应当使用COOKIE。</p>
<p>4、限制：单个cookie保存的数据不能超过4K，很多浏览器都限制一个站点最多保存20个cookie。</p>
<h1 id="垃圾回收器"><a href="#垃圾回收器" class="headerlink" title="垃圾回收器"></a>垃圾回收器</h1><p>JDK1.8默认垃圾回收器：Parallel Scavenge(标记-复制算法 关注吞吐量) + Parallel Old</p>
<p>JDK9开始默认垃圾回收器：G1收集器，使用的标记-整理；<strong>G1与CMS只有并发标记才不会stop-the-world。</strong></p>
<blockquote>
<p>G1收集器的步骤：</p>
<p>​    初始标记、并发标记、最终标记、筛选回收</p>
</blockquote>
<p>CMS收集器从JDK9开始全面废除；使用的标记-清除</p>
<blockquote>
<p>CMS收集器的步骤：</p>
<p>​    初始标记、并发标记、重新标记、并发清除</p>
</blockquote>
<h1 id="静态类和成员类的区别"><a href="#静态类和成员类的区别" class="headerlink" title="静态类和成员类的区别"></a>静态类和成员类的区别</h1><p>静态方法：</p>
<p>1、 静态方法中可以直接调用同类中的静态成员，但不能直接调用非静态成员</p>
<p><img src="/2022/09/07/%E9%9D%A2%E8%AF%95%E8%A1%A5%E5%85%85/image-20221013220338553.png" srcset="/img/loading.gif" lazyload></p>
<p>2、 在普通成员方法中，则可以直接访问同类的非静态变量和静态变量</p>
<p><img src="/2022/09/07/%E9%9D%A2%E8%AF%95%E8%A1%A5%E5%85%85/image-20221013221352919.png" srcset="/img/loading.gif" lazyload></p>
<p>3、静态内部类可以直接实例化，而非静态内部类不可以</p>
<p><img src="/2022/09/07/%E9%9D%A2%E8%AF%95%E8%A1%A5%E5%85%85/image-20221013221552125.png" srcset="/img/loading.gif" lazyload></p>
<p>4、静态方法中不能直接调用非静态方法，需要通过对象来访问非静态方法</p>
<p><img src="/2022/09/07/%E9%9D%A2%E8%AF%95%E8%A1%A5%E5%85%85/image-20221013221726735.png" srcset="/img/loading.gif" lazyload></p>
<h1 id="数据库连接步骤"><a href="#数据库连接步骤" class="headerlink" title="数据库连接步骤"></a>数据库连接步骤</h1><p>1、加载驱动 2、建立连接 3、创建sql 4、执行sql语句 5、创建返回结果集 6、手动关闭连接</p>
<h1 id="mybatis启动流程"><a href="#mybatis启动流程" class="headerlink" title="mybatis启动流程"></a>mybatis启动流程</h1><p>1、从配置文件中得到SessionFactory</p>
<p>2、从SessionFactory得到SqlSession；</p>
<p>3、通过SqlSession进行CRUD和事务的操作；</p>
<p>4、执行完相关操作之后关闭Session。</p>
<h1 id="vector和arraylist的区别"><a href="#vector和arraylist的区别" class="headerlink" title="vector和arraylist的区别"></a>vector和arraylist的区别</h1><p>vector是安全的，而arraylist是不安全的，vector扩容是扩大为之前的两倍，而arraylist是扩容到之前的1.5倍</p>
<h1 id="HashMap和HashTable的区别"><a href="#HashMap和HashTable的区别" class="headerlink" title="HashMap和HashTable的区别"></a>HashMap和HashTable的区别</h1><p><img src="/2022/09/07/%E9%9D%A2%E8%AF%95%E8%A1%A5%E5%85%85/image-20221023225904885.png" srcset="/img/loading.gif" lazyload alt="区别"></p>
<h1 id="ioc的refresh-方法"><a href="#ioc的refresh-方法" class="headerlink" title="ioc的refresh()方法"></a>ioc的refresh()方法</h1><p>ioc 主要是refresh()</p>
<p>获得beanfactory也就是一个获得一个DefaultListAbleBeanFactory 会有一系列的loadBeanDefinitions方法的过程，将不同的注释或者xml注入的信息转换成一个相同的beandefinition，然后利用beandefinitionreader对象来进行读取，通过for循环将各种配置文件分开，然后根据不同的注入信息生成对应的xml或者注释的信息；然后是一个doloadbeandefinitions将这些文件生成一个个对应的dom对象，使用documentreader读取配置文件，然后通过registerBeanDefinitions将这些文件生成一颗dom树，就可以从dom树中获取文件，然后通过doRegisterBeanDefinitions方法先查询bean中是否有嵌套一个bean，如果有就回到这个doRegisterBeanDefinitions方法，主要是用来注册beandefinitions，其中有一个主要的方法是parseBeanDefinitions，主要用来解析一些标签，将之前的dom树的root节点进行for循环遍历，如果是默认的命名空间就会解析四个标签 import 、alias、bean和 beans，beans就是一个递归的过程，就相当于又回到了这个doregisterbeandefinitions方法中；解析bean文件的时候，将bean节点中的信息提取出来然后封装到BeanDefinitionHolder中，如果没有使用别名就生成了一个BeanDefinition对象；但是如果发现bean使用了别名，那么就将这个别名放到一个别名的map集合中，这个集合的key是别名，value是实际上的name。将这些信息注册到BeanDefinition中，最后返回，这个时候就得到一个完成的BeanDefinition；然后通过一个beanfactorypostprocesser增强这些beanfactory，以及通过beanpostprocesser增强bean，然后就是广播 异常回调 国际化的操作，然后会有一个实例化bean的过程来给一些非懒加载的单例bean的属性赋初值 然后进行一些依赖注入最后通过反射进行实例化</p>
<h1 id="当redis内存使用完全之后，继续写入数据会怎样？"><a href="#当redis内存使用完全之后，继续写入数据会怎样？" class="headerlink" title="当redis内存使用完全之后，继续写入数据会怎样？"></a>当redis内存使用完全之后，继续写入数据会怎样？</h1><p>会自动调用内存淘汰策略：一共有六种内存淘汰策略，针对设置过期时间和没有设置过期时间有不同的办法</p>
<blockquote>
<p>不进行淘汰</p>
</blockquote>
<p>noeviction</p>
<blockquote>
<p>设置过期时间之后的淘汰策略</p>
</blockquote>
<p>volatile-random：从已经设置过期时间的时间集中随机进行淘汰</p>
<p>volatile-ttl：从已经设置过期时间的时间集中根据过期时间的先后来进行淘汰</p>
<p>volatile-lru：从已经设置过期时间的时间集中寻找最近最少使用的数据进行淘汰</p>
<p>volatile-lfu：从已经设置过期时间的时间集中寻找最不经常使用的数据进行淘汰</p>
<blockquote>
<p>全局淘汰的策略</p>
</blockquote>
<p>allkeys-lru：当内存不足以容纳新写入数据时，在键空间中，移除最近最少使用的 key</p>
<p>allkeys-random：从数据集中随机进行淘汰</p>
<p>allkeys-lfu：当内存不足以容纳新写入数据时，在键空间中，移除最不经常使用的 key</p>
<h1 id="微服务中nacos如果突然挂了，那么用户已经调用的nacos服务会发生什么？"><a href="#微服务中nacos如果突然挂了，那么用户已经调用的nacos服务会发生什么？" class="headerlink" title="微服务中nacos如果突然挂了，那么用户已经调用的nacos服务会发生什么？"></a>微服务中nacos如果突然挂了，那么用户已经调用的nacos服务会发生什么？</h1><p>用户调用的服务会在完成当前的事情之后进行关闭</p>
<h1 id="秒杀系统"><a href="#秒杀系统" class="headerlink" title="秒杀系统"></a>秒杀系统</h1><p><a target="_blank" rel="noopener" href="https://www.jianshu.com/p/cad0ecd7562b">秒杀遇到的问题及解决方案</a></p>
<p>秒杀场景就是一件商品的购买人数远远大于这件商品的库存，而且这件商品在很短的时间内就会被抢购一空。比如说双十一促销，618促销。</p>
<p>会遇见的问题：</p>
<hr>
<p>1、高并发下产生的压力问题</p>
<p><strong>解决方案：1.采用限流</strong></p>
<p>使用nginx做负载均衡，</p>
<p><strong>解决方案：2.</strong></p>
<hr>
<p>2、超卖 </p>
<p><strong>解决方案：</strong></p>
<p>在数据库减库存时加上<strong>库存数量判断</strong>，防止数据变为负数</p>
<p><strong>使用悲观锁、乐观锁(判断库存数量以及添加一个版本号)、redis(redis是单线程串行化执行，当被购买之后数量-1直到0的时候结束)</strong></p>
<hr>
<p>3、数据库宕机 </p>
<p><strong>使用消息队列来进行削峰</strong> 如果数据库只能1s5000个数据，然后使用消息队列每秒释放4000个</p>
<p><strong>引入redis缓存</strong> 活动开始前将可能会被访问到的所有数据都加载到redis中还有一些缓存击穿缓存穿透</p>
<p><strong>数据库读写分离</strong></p>
<hr>
<p>4、由于高访问量带来的带宽问题</p>
<p><strong>解决方案：采用商品页面静态化</strong></p>
<p>将页面内容全部写入静态页面中，这样就能不访问数据库也不需要进行业务逻辑处理</p>
<hr>
<p>5、恶意请求</p>
<p>一个人使用脚本有多个账号进行购买<strong>在付款的时候回答一些问题或者点击图片中的文字</strong></p>
<p>防止一个人购买多次使用 <strong>用户id和商品id联合主键利用主键的唯一性</strong></p>
<h1 id="b-树的增删改查操作流程"><a href="#b-树的增删改查操作流程" class="headerlink" title="b+树的增删改查操作流程"></a>b+树的增删改查操作流程</h1><p><a target="_blank" rel="noopener" href="https://zhuanlan.zhihu.com/p/149287061">B+树的增删改查操作</a></p>
<p>一颗m阶的B树定义如下：</p>
<p>1）每个结点最多有m-1个关键字(数据)。</p>
<p>2）根结点最少可以只有1个关键字。</p>
<p>3）非根结点至少有Math.ceil(m/2)-1个关键字。</p>
<p>4）每个结点中的关键字都按照从小到大的顺序排列，每个关键字的左子树中的所有关键字都小于它，而右子树中的所有关键字都大于它。</p>
<p>5）所有叶子结点都位于同一层，或者说根结点到每个叶子结点的长度都相同。</p>
<h1 id="如何判断一个线程执行完成？"><a href="#如何判断一个线程执行完成？" class="headerlink" title="如何判断一个线程执行完成？"></a>如何判断一个线程执行完成？</h1><p>1、Thread.isAlive()方法，如果线程没有执行完毕，就返回true；</p>
<p>2、通过Thread.activeCount()方法来判断当前运行的线程的数量；</p>
<h1 id="如何让线程按顺序执行？"><a href="#如何让线程按顺序执行？" class="headerlink" title="如何让线程按顺序执行？"></a>如何让线程按顺序执行？</h1><p><a target="_blank" rel="noopener" href="https://cloud.tencent.com/developer/article/1522404">java | 如何让线程按顺序执行？</a></p>
<p>1、join() 谁执行这个方法就先执行线程</p>
<p>2、使用线程的CountDownLatch(倒计时)</p>
<p>​        搭配着<code>x.countDown()</code> <em>该方法是将倒计时中的数字 - 1</em>以及<code>x.await()</code>方法 该方法是直到x的计数器为0才开    始执行接下来的语句</p>
<p>3、使用线程的Semaphore(信号量)方法</p>
<p>​        搭配着**acquire():**当前线程尝试去阻塞的获取1个许可证,此过程是阻塞的,当前线程获取了1个可用的许可证，    则会停止等待，继续执行。</p>
<p>​        **release():**当前线程释放1个可用的许可证。</p>
<h1 id="HTTP的长连接和短连接"><a href="#HTTP的长连接和短连接" class="headerlink" title="HTTP的长连接和短连接"></a>HTTP的长连接和短连接</h1><p>在HTTP/1.0中默认使用短连接。也就是说，客户端和服务器每进行一次HTTP操作，就建立一次连接，任务结束就中断连接。当客户端浏览器访问的某个HTML或其他类型的Web页中包含有其他的Web资源（如JavaScript文件、图像文件、CSS文件等），每遇到这样一个Web资源，浏览器就会重新建立一个HTTP会话。</p>
<p>而从HTTP/1.1起，默认使用长连接，用以保持连接特性。使用长连接的HTTP协议，会在响应头加入这行代码：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs html">Connection:keep-alive<br></code></pre></td></tr></table></figure>

<p>在使用长连接的情况下，当一个网页打开完成后，客户端和服务器之间用于传输HTTP数据的TCP连接不会关闭，客户端再次访问这个服务器时，会继续使用这一条已经建立的连接。Keep-Alive不会永久保持连接，它有一个保持时间，可以在不同的服务器软件（如Apache）中设定这个时间。实现长连接需要客户端和服务端都支持长连接。</p>
<p>HTTP协议的长连接和短连接，实质上是TCP协议的长连接和短连接。</p>
<h1 id="oAuth-2-0"><a href="#oAuth-2-0" class="headerlink" title="oAuth 2.0"></a>oAuth 2.0</h1><p><strong>OAuth 就是一种授权机制。数据的所有者告诉系统，同意授权第三方应用进入系统，获取这些数据。系统从而产生一个短期的进入令牌（token），用来代替密码，供第三方应用使用，一般用于第三方(QQ，微信)登录</strong></p>
<p>其中有四种授权类型</p>
<p>1、授权码 code：前后端交互**(最常用)**</p>
<p>2、隐式token:只有前端的项目或者移动端的项目</p>
<p>3、资源所有者密码凭证 password：资源所有者和客户端之间具有高度信任时</p>
<p>4、客户端证书</p>
<p><strong>重定向一定要用302</strong></p>
<p><a target="_blank" rel="noopener" href="http://www.ruanyifeng.com/blog/2019/04/oauth-grant-types.html">OAuth 2.0 的四种方式 </a></p>
<h1 id="什么是JWT"><a href="#什么是JWT" class="headerlink" title="什么是JWT"></a>什么是JWT</h1><p>JWT本质上就是一组字串，通过(.)将JWT分为三部分，包括 头部，负载，签名</p>
<p>头部是一个描述JWT元数据的JSON对象(里面存放着签名算法以及令牌类型)；负载是一个JSON对象，里面包含着需要传递的数据，因为负载在部分默认不加密，所以不要将一些隐私信息存放在负载中；签名哈希时通过头部指定的算法生成hash，保证数据的保密性</p>
<hr>
<p><strong>jwt的好处</strong></p>
<p>存储在本地存储中，不在cookie中，所以大大减轻了服务端的压力；而且因为存储在本地存储中，不用cookie，所以可以防止CSRF(跨域请求伪造)攻击</p>
<h1 id="HTTP-与-HTTPS-区别"><a href="#HTTP-与-HTTPS-区别" class="headerlink" title="HTTP 与 HTTPS 区别"></a>HTTP 与 HTTPS 区别</h1><p>HTTP 明文传输，数据都是未加密的，安全性较差，HTTPS（SSL+HTTP） 数据传输过程是加密的，安全性较好。</p>
<p>使用 HTTPS 协议需要到 CA（Certificate Authority，数字证书认证机构） 申请证书，一般免费证书较少，因而需要一定费用。证书颁发机构如：Symantec、Comodo、GoDaddy 和 GlobalSign 等。</p>
<p>HTTP 页面响应速度比 HTTPS 快，主要是因为 HTTP 使用 TCP 三次握手建立连接，客户端和服务器需要交换 3 个包，而 HTTPS除了 TCP 的三个包，还要加上 ssl 握手需要的 9 个包，所以一共是 12 个包。</p>
<p>http 和 https 使用的是完全不同的连接方式，用的端口也不一样，前者是 80，后者是 443。</p>
<p>HTTPS 其实就是建构在 SSL/TLS 之上的 HTTP 协议，所以，要比较 HTTPS 比 HTTP 要更耗费服务器资源。</p>
<h1 id="myisam与innodb的区别"><a href="#myisam与innodb的区别" class="headerlink" title="myisam与innodb的区别"></a>myisam与innodb的区别</h1><p>1、myisam不支持事务，而innodb支持事务</p>
<p>2、myisam只有表级锁，而innodb有表级锁和行级锁</p>
<p>3、myisam不支持外键，而innodb支持外键</p>
<p>4、innodb支持redolog在崩溃之后可以安全恢复</p>
<h1 id="mybatis中dao层的接口可以重载吗？为什么？"><a href="#mybatis中dao层的接口可以重载吗？为什么？" class="headerlink" title="mybatis中dao层的接口可以重载吗？为什么？"></a>mybatis中dao层的接口可以重载吗？为什么？</h1>
              
            </div>
            <hr/>
            <div>
              <div class="post-metas my-3">
  
    <div class="post-meta mr-3 d-flex align-items-center">
      <i class="iconfont icon-category"></i>
      

<span class="category-chains">
  
  
    
      <span class="category-chain">
        
  <a href="/categories/%E9%9D%A2%E8%AF%95/" class="category-chain-item">面试</a>
  
  

      </span>
    
  
</span>

    </div>
  
  
    <div class="post-meta">
      <i class="iconfont icon-tags"></i>
      
        <a href="/tags/%E9%9D%A2%E8%AF%95/">#面试</a>
      
    </div>
  
</div>


              
  

  <div class="license-box my-3">
    <div class="license-title">
      <div>面试补充</div>
      <div>https://eliseo.top/2022/09/07/面试补充/</div>
    </div>
    <div class="license-meta">
      
        <div class="license-meta-item">
          <div>作者</div>
          <div>Mr.Wang</div>
        </div>
      
      
        <div class="license-meta-item license-meta-date">
          <div>发布于</div>
          <div>2022年9月7日</div>
        </div>
      
      
      <div class="license-meta-item">
        <div>许可协议</div>
        <div>
          
            
            
              <a target="_blank" href="https://creativecommons.org/licenses/by/4.0/">
              <span class="hint--top hint--rounded" aria-label="BY - 署名">
                <i class="iconfont icon-by"></i>
              </span>
              </a>
            
          
        </div>
      </div>
    </div>
    <div class="license-icon iconfont"></div>
  </div>



              
            </div>

            
          </article>
        </div>
      </div>
    </div>

    <div class="side-col d-none d-lg-block col-lg-2">
      
  <aside class="sidebar" style="margin-left: -1rem">
    <div id="toc">
  <p class="toc-header"><i class="iconfont icon-list"></i>&nbsp;目录</p>
  <div class="toc-body" id="toc-body"></div>
</div>



  </aside>


    </div>
  </div>
</div>





  



  



  



  



  






    

    
      <a id="scroll-top-button" aria-label="TOP" href="#" role="button">
        <i class="iconfont icon-arrowup" aria-hidden="true"></i>
      </a>
    

    
      <div class="modal fade" id="modalSearch" tabindex="-1" role="dialog" aria-labelledby="ModalLabel"
     aria-hidden="true">
  <div class="modal-dialog modal-dialog-scrollable modal-lg" role="document">
    <div class="modal-content">
      <div class="modal-header text-center">
        <h4 class="modal-title w-100 font-weight-bold">搜索</h4>
        <button type="button" id="local-search-close" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body mx-3">
        <div class="md-form mb-5">
          <input type="text" id="local-search-input" class="form-control validate">
          <label data-error="x" data-success="v" for="local-search-input">关键词</label>
        </div>
        <div class="list-group" id="local-search-result"></div>
      </div>
    </div>
  </div>
</div>

    

    
  </main>

  <footer>
    <div class="footer-inner">
  
    <div class="footer-content">
       <span>王嘉玮</span> <i class="iconfont icon-love"></i> <span>赵梦</span> <div style="font-size: 0.85rem"> <span id="timeDate">载入天数...</span> <span id="times">载入时分秒...</span> <script src="/js/duration.js"></script> </div> 
    </div>
  
  
    <div class="statistics">
  
  

  
    
      <span id="busuanzi_container_site_pv" style="display: none">
        总访问量 
        <span id="busuanzi_value_site_pv"></span>
         次
      </span>
    
    
      <span id="busuanzi_container_site_uv" style="display: none">
        总访客数 
        <span id="busuanzi_value_site_uv"></span>
         人
      </span>
    
    
  
</div>

  
  
    <!-- 备案信息 ICP for China -->
    <div class="beian">
  <span>
    <a href="http://beian.miit.gov.cn/" target="_blank" rel="nofollow noopener">
      晋ICP备2021019596号
    </a>
  </span>
  
</div>

  
  
</div>

  </footer>

  <!-- Scripts -->
  
  <script  src="https://lib.baomitu.com/nprogress/0.2.0/nprogress.min.js" ></script>
  <link  rel="stylesheet" href="https://lib.baomitu.com/nprogress/0.2.0/nprogress.min.css" />

  <script>
    NProgress.configure({"showSpinner":false,"trickleSpeed":100})
    NProgress.start()
    window.addEventListener('load', function() {
      NProgress.done();
    })
  </script>


<script  src="https://lib.baomitu.com/jquery/3.6.0/jquery.min.js" ></script>
<script  src="https://lib.baomitu.com/twitter-bootstrap/4.6.1/js/bootstrap.min.js" ></script>
<script  src="/js/events.js" ></script>
<script  src="/js/plugins.js" ></script>


  <script  src="https://lib.baomitu.com/typed.js/2.0.12/typed.min.js" ></script>
  <script>
    (function (window, document) {
      var typing = Fluid.plugins.typing;
      var subtitle = document.getElementById('subtitle');
      if (!subtitle || !typing) {
        return;
      }
      var text = subtitle.getAttribute('data-typed-text');
      
        typing(text);
      
    })(window, document);
  </script>






  
    <script  src="/js/img-lazyload.js" ></script>
  




  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/tocbot/4.18.0/tocbot.min.js', function() {
    var toc = jQuery('#toc');
    if (toc.length === 0 || !window.tocbot) { return; }
    var boardCtn = jQuery('#board-ctn');
    var boardTop = boardCtn.offset().top;

    window.tocbot.init({
      tocSelector     : '#toc-body',
      contentSelector : '.markdown-body',
      headingSelector : CONFIG.toc.headingSelector || 'h1,h2,h3,h4,h5,h6',
      linkClass       : 'tocbot-link',
      activeLinkClass : 'tocbot-active-link',
      listClass       : 'tocbot-list',
      isCollapsedClass: 'tocbot-is-collapsed',
      collapsibleClass: 'tocbot-is-collapsible',
      collapseDepth   : CONFIG.toc.collapseDepth || 0,
      scrollSmooth    : true,
      headingsOffset  : -boardTop
    });
    if (toc.find('.toc-list-item').length > 0) {
      toc.css('visibility', 'visible');
    }
  });
</script>


  <script>
  (function() {
    var enableLang = CONFIG.code_language.enable && CONFIG.code_language.default;
    var enableCopy = CONFIG.copy_btn;
    if (!enableLang && !enableCopy) {
      return;
    }

    function getBgClass(ele) {
      return Fluid.utils.getBackgroundLightness(ele) >= 0 ? 'code-widget-light' : 'code-widget-dark';
    }

    var copyTmpl = '';
    copyTmpl += '<div class="code-widget">';
    copyTmpl += 'LANG';
    copyTmpl += '</div>';
    jQuery('.markdown-body pre').each(function() {
      var $pre = jQuery(this);
      if ($pre.find('code.mermaid').length > 0) {
        return;
      }
      if ($pre.find('span.line').length > 0) {
        return;
      }

      var lang = '';

      if (enableLang) {
        lang = CONFIG.code_language.default;
        if ($pre[0].children.length > 0 && $pre[0].children[0].classList.length >= 2 && $pre.children().hasClass('hljs')) {
          lang = $pre[0].children[0].classList[1];
        } else if ($pre[0].getAttribute('data-language')) {
          lang = $pre[0].getAttribute('data-language');
        } else if ($pre.parent().hasClass('sourceCode') && $pre[0].children.length > 0 && $pre[0].children[0].classList.length >= 2) {
          lang = $pre[0].children[0].classList[1];
          $pre.parent().addClass('code-wrapper');
        } else if ($pre.parent().hasClass('markdown-body') && $pre[0].classList.length === 0) {
          $pre.wrap('<div class="code-wrapper"></div>');
        }
        lang = lang.toUpperCase().replace('NONE', CONFIG.code_language.default);
      }
      $pre.append(copyTmpl.replace('LANG', lang).replace('code-widget">',
        getBgClass($pre[0]) + (enableCopy ? ' code-widget copy-btn" data-clipboard-snippet><i class="iconfont icon-copy"></i>' : ' code-widget">')));

      if (enableCopy) {
        Fluid.utils.createScript('https://lib.baomitu.com/clipboard.js/2.0.10/clipboard.min.js', function() {
          var clipboard = new window.ClipboardJS('.copy-btn', {
            target: function(trigger) {
              var nodes = trigger.parentNode.childNodes;
              for (var i = 0; i < nodes.length; i++) {
                if (nodes[i].tagName === 'CODE') {
                  return nodes[i];
                }
              }
            }
          });
          clipboard.on('success', function(e) {
            e.clearSelection();
            e.trigger.innerHTML = e.trigger.innerHTML.replace('icon-copy', 'icon-success');
            setTimeout(function() {
              e.trigger.innerHTML = e.trigger.innerHTML.replace('icon-success', 'icon-copy');
            }, 2000);
          });
        });
      }
    });
  })();
</script>


  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/anchor-js/4.3.1/anchor.min.js', function() {
    window.anchors.options = {
      placement: CONFIG.anchorjs.placement,
      visible  : CONFIG.anchorjs.visible
    };
    if (CONFIG.anchorjs.icon) {
      window.anchors.options.icon = CONFIG.anchorjs.icon;
    }
    var el = (CONFIG.anchorjs.element || 'h1,h2,h3,h4,h5,h6').split(',');
    var res = [];
    for (var item of el) {
      res.push('.markdown-body > ' + item.trim());
    }
    if (CONFIG.anchorjs.placement === 'left') {
      window.anchors.options.class = 'anchorjs-link-left';
    }
    window.anchors.add(res.join(', '));
  });
</script>


  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.js', function() {
    Fluid.plugins.fancyBox();
  });
</script>


  <script>Fluid.plugins.imageCaption();</script>

  <script  src="/js/local-search.js" ></script>

  <script defer src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js" ></script>




  
<script src="/js/diy/yinghua.js"></script>



<!-- 主题的启动项，将它保持在最底部 -->
<!-- the boot of the theme, keep it at the bottom -->
<script  src="/js/boot.js" ></script>


  

  <noscript>
    <div class="noscript-warning">博客在允许 JavaScript 运行的环境下浏览效果更佳</div>
  </noscript>
</body>
</html>
